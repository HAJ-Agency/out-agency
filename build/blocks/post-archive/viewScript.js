(()=>{var t;(t=jQuery)(function(){t(".post-archive").each(function(){$postArchive=t(this);let s=[],e=$postArchive.data("posts-per-page"),o=$postArchive.data("post-type")||"post",a=e,p=$postArchive.data("post-category")||"";const r=$postArchive.find(".posts-wrapper"),c=$postArchive.find(".post-archive-empty"),n=$postArchive.find(".posts-load-more button"),i=n.find(".posts-load-more-text"),d=n.find(".posts-load-more-loader"),h=$postArchive.find(".post-categories"),l=(e,a,p=!0,r=$postArchive.data("post-category")||"")=>t.ajax({url:"/wp-json/hapi/v1/get-post-type-content/",method:"GET",data:{post_type:o,offset:e,posts_per_page:a,category_slug:r},success:function(t){const o=t.posts||[],a=t.found_posts||0;p?(e=0,v(o,a,!0)):(s.push(...o),s.length>0?(d.removeClass("show"),i.addClass("show"),n.addClass("show")):n.removeClass("show"))}}),v=(s,e,o=!1)=>{o&&r.empty(),s.length>0?s.forEach(s=>{const e=t(".post-card.template").clone().removeClass("template");e.find(".post-card__title").text(s.title),e.find(".post-card__excerpt").text(s.excerpt),e.find(".post-card__image").html(s.image),e.find(".post-card__read-more").attr("href",s.link),r.append(e)}):c.show(),r.show()};l(a,e,!1),n.on("click",function(o){o.preventDefault(),t(this),i.removeClass("show"),d.show();const c=s.splice(0,8);v(c,s.length,!1),a+=e,l(a,e,!1,p).then(t=>{t.found_posts<=r.children().length&&n.removeClass("show"),i.addClass("show"),d.removeClass("show")})}),h.on("click","button",function(o){o.preventDefault();const r=t(this);p=r.data("category-slug"),$postArchive.data("post-category",p),h.find("button").removeClass("active"),r.addClass("active"),s=[],a=0,l(a,e,!0,p).then(()=>{a+=e,l(a,e,!1,p)})})})})})();